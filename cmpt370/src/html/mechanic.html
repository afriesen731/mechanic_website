<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mechanic Dashboard</title>
    <link rel="stylesheet" href="../css/mechanic.css">
    <script src="../js/mechanic.js" type="module" defer></script>
</head>
<body>
    <div class="top-bar">
        <div class="logo">
            <a href="javascript:void(0);" id="main-dashboard-link">
                <img src="../images/FINAL_logo.png" alt="Logo" class="logo">
            </a>
        </div>

        <div class="menu">
            <a href="javascript:void(0);" id="my-workorders-link">My Work-Orders</a>
        </div>
    </div>

    <div class="main-content" id="main-content">
        <!-- Container for the work orders table -->
        <div id="iframe-container-my-workorders" class="content-page">
            <iframe id="workorders-iframe" src="../html/workorders.html?role=mechanic&type=in_progress"></iframe>
        </div>

        <!-- Container for detailed work order view -->
        <div id="iframe-container-workorder-details" class="content-page" style="display: none;">
            <iframe id="workorder-details-iframe" src=""></iframe>
        </div>
    </div>

    <!-- Script to expose the showIframe function to parent -->
    <script>
        function showIframe(frameId) {
            const contentPages = document.querySelectorAll('.content-page');
            contentPages.forEach(page => page.style.display = 'none');

            const targetFrame = document.getElementById(frameId) || document.getElementById('iframe-container-my-workorders');
            if (targetFrame) {
                targetFrame.style.display = 'block';
            } else {
                console.error(`Iframe with ID ${frameId} not found.`);
            }
        }

        // Attach showIframe to the window object so it can be called by parent scripts
        window.showIframe = showIframe;
    </script>
</body>
</html>